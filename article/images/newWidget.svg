<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="826px" preserveAspectRatio="none" style="width:306px;height:826px;" version="1.1" viewBox="0 0 306 826" width="306px" zoomAndPan="magnify"><defs><filter height="300%" id="fxwiiefvw53jg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="139" cy="20" fill="#000000" filter="url(#fxwiiefvw53jg)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fxwiiefvw53jg)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="105" y="146.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="115" y="167.9434">卸载子树</text><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="106,98.4023,172,98.4023,184,110.4023,172,122.4023,106,122.4023,94,110.4023,106,98.4023" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="143" y="132.6128">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="106" y="114.2104">child != null</text><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="139,205.1758,151,217.1758,139,229.1758,127,217.1758,139,205.1758" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="139" cy="259.1758" fill="#FFFFFF" filter="url(#fxwiiefvw53jg)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="132.8128" x2="145.1872" y1="252.9886" y2="265.363"/><line style="stroke: #000000; stroke-width: 2.5;" x1="145.1872" x2="132.8128" y1="252.9886" y2="265.363"/><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="86,50,192,50,204,62,192,74,86,74,74,62,86,50" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="143" y="84.2104">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="86" y="65.8081">newWidget == null</text><ellipse cx="139" cy="417.9805" fill="#FFFFFF" filter="url(#fxwiiefvw53jg)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="132.8128" x2="145.1872" y1="411.7933" y2="424.1677"/><line style="stroke: #000000; stroke-width: 2.5;" x1="145.1872" x2="132.8128" y1="411.7933" y2="424.1677"/><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="69,359.5781,209,359.5781,221,371.5781,209,383.5781,69,383.5781,57,371.5781,69,359.5781" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="143" y="393.7886">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="69" y="375.3862">newWidget == oldWidget</text><rect fill="#FEFECE" filter="url(#fxwiiefvw53jg)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="94.5" y="519.9922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="104.5" y="541.1309">替换 widget</text><ellipse cx="139" cy="591.0742" fill="#FFFFFF" filter="url(#fxwiiefvw53jg)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="132.8128" x2="145.1872" y1="584.887" y2="597.2614"/><line style="stroke: #000000; stroke-width: 2.5;" x1="145.1872" x2="132.8128" y1="584.887" y2="597.2614"/><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="32,469.9805,246,469.9805,258,482.7852,246,495.5898,32,495.5898,20,482.7852,32,469.9805" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="143" y="505.8003">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="32" y="480.1909">newWidget.type != oldWidget.type &amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="36" y="492.9956">newWidget.key != oldWidget.key</text><rect fill="#FEFECE" filter="url(#fxwiiefvw53jg)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="105" y="643.0742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="115" y="664.2129">卸载子树</text><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="106,311.1758,172,311.1758,184,323.1758,172,335.1758,106,335.1758,94,323.1758,106,311.1758" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="143" y="345.3862">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="106" y="326.9839">child != null</text><polygon fill="#FEFECE" filter="url(#fxwiiefvw53jg)" points="139,697.043,151,709.043,139,721.043,127,709.043,139,697.043" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fxwiiefvw53jg)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="105" y="741.043"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="115" y="762.1816">递归重建</text><ellipse cx="139" cy="805.0117" fill="#FFFFFF" filter="url(#fxwiiefvw53jg)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="132.8128" x2="145.1872" y1="798.8245" y2="811.1989"/><line style="stroke: #000000; stroke-width: 2.5;" x1="145.1872" x2="132.8128" y1="798.8245" y2="811.1989"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="122.4023" y2="146.8047"/><polygon fill="#A80036" points="135,136.8047,139,146.8047,143,136.8047,139,140.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="184" x2="196" y1="110.4023" y2="110.4023"/><polygon fill="#A80036" points="192,153.7891,196,163.7891,200,153.7891,196,157.7891" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="196" x2="196" y1="110.4023" y2="217.1758"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="196" x2="151" y1="217.1758" y2="217.1758"/><polygon fill="#A80036" points="161,213.1758,151,217.1758,161,221.1758,157,217.1758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="180.7734" y2="205.1758"/><polygon fill="#A80036" points="135,195.1758,139,205.1758,143,195.1758,139,199.1758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="229.1758" y2="249.1758"/><polygon fill="#A80036" points="135,239.1758,139,249.1758,143,239.1758,139,243.1758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="74" y2="98.4023"/><polygon fill="#A80036" points="135,88.4023,139,98.4023,143,88.4023,139,92.4023" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="204" x2="216" y1="62" y2="62"/><polygon fill="#A80036" points="212,178.2891,216,188.2891,220,178.2891,216,182.2891" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="216" x2="216" y1="62" y2="291.1758"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="216" x2="139" y1="291.1758" y2="291.1758"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="291.1758" y2="311.1758"/><polygon fill="#A80036" points="135,301.1758,139,311.1758,143,301.1758,139,305.1758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="30" y2="50"/><polygon fill="#A80036" points="135,40,139,50,143,40,139,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="383.5781" y2="407.9805"/><polygon fill="#A80036" points="135,397.9805,139,407.9805,143,397.9805,139,401.9805" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="221" x2="233" y1="371.5781" y2="371.5781"/><polygon fill="#A80036" points="229,404.9805,233,414.9805,237,404.9805,233,408.9805" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="233" x2="233" y1="371.5781" y2="449.9805"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="233" x2="139" y1="449.9805" y2="449.9805"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="449.9805" y2="469.9805"/><polygon fill="#A80036" points="135,459.9805,139,469.9805,143,459.9805,139,463.9805" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="553.9609" y2="581.0742"/><polygon fill="#A80036" points="135,571.0742,139,581.0742,143,571.0742,139,575.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="495.5898" y2="519.9922"/><polygon fill="#A80036" points="135,509.9922,139,519.9922,143,509.9922,139,513.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="270" y1="482.7852" y2="482.7852"/><polygon fill="#A80036" points="266,551.0742,270,561.0742,274,551.0742,270,555.0742" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="270" y1="482.7852" y2="623.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="139" y1="623.0742" y2="623.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="623.0742" y2="643.0742"/><polygon fill="#A80036" points="135,633.0742,139,643.0742,143,633.0742,139,637.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="335.1758" y2="359.5781"/><polygon fill="#A80036" points="135,349.5781,139,359.5781,143,349.5781,139,353.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="184" x2="280" y1="323.1758" y2="323.1758"/><polygon fill="#A80036" points="276,512.2539,280,522.2539,284,512.2539,280,516.2539" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="280" x2="280" y1="323.1758" y2="709.043"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="280" x2="151" y1="709.043" y2="709.043"/><polygon fill="#A80036" points="161,705.043,151,709.043,161,713.043,157,709.043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="677.043" y2="697.043"/><polygon fill="#A80036" points="135,687.043,139,697.043,143,687.043,139,691.043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="721.043" y2="741.043"/><polygon fill="#A80036" points="135,731.043,139,741.043,143,731.043,139,735.043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139" x2="139" y1="775.0117" y2="795.0117"/><polygon fill="#A80036" points="135,785.0117,139,795.0117,143,785.0117,139,789.0117" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start
if (newWidget == null) then (yes)
    if (child != null) then (yes)
        :卸载子树;
    endif
    end
endif
if (child != null) then (yes)
    if (newWidget == oldWidget) then (yes)
        end
    endif
    if (newWidget.type != oldWidget.type &&\n newWidget.key != oldWidget.key) then (yes)
        :替换 widget;
        end
    endif
    :卸载子树;
endif
:递归重建;
end
@enduml

PlantUML version 1.2019.03(Sun Mar 10 11:04:44 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>